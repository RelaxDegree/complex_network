魏主得知曹真损兵折将，急忙问司马懿怎么办。司马懿说：“孔明不能从陈仓运粮，利在
　　速战，我军只宜久守。陛下可传旨，让曹真坚守各处关隘，不要出战。不出一个月，蜀兵自
　　退，到那时乘胜追击，可擒孔明。”魏主说：“你既然有这么高明的计策，怎么不亲自
　　上阵
　　?”司马懿说：“不是臣怕死，孙权不久必称帝，还会入侵，臣在提防他们。”魏主就让太
　　常卿韩暨传旨，命曹真坚守不出。司马懿又叮嘱韩暨，见了曹真，千万别说是他的主意，只
　　说是天子的圣旨。韩暨到曹真寨中传了旨，郭淮已看出是司马懿的主意，提议让王双加强巡
　　逻，提防蜀兵运粮。孙礼又献计，他用粮车装上干柴，撒上硫磺，故意说是粮草，诱蜀兵来
　　截，
　　再放火烧车，可败蜀军。曹真就让他依计行事，传令王双加强巡逻，郭淮提调箕谷、街亭，
　　让张辽的儿子张虎为先锋，乐进的儿子乐琳为副先锋，同守第一营，不许出战。
　　孔明见魏兵坚守不出，忽报孙礼押送粮车来到。孔明笑着说：“我平生专用火攻，他竟想
　　用火攻暗算我。我们可将计就计。”他命令马岱领三千兵，到魏兵屯粮处，只在上风头放火
　　。派马忠、张嶷在外包围，内外夹攻。又派关兴、张苞，今晚西山火起，魏兵来劫营，二人
　　可截击。再派吴班、吴懿领兵断敌退路。探子见蜀军调动人马，忙报告孙礼，孙礼又派人飞
　　报曹真，曹真传令张虎、乐琳，见西山火起，可如此出兵。当夜二更，孙礼在四面布下伏兵
　　，马岱兵到，趁东南风放起火来。孙礼只当蜀兵已入魏寨，忙率伏兵杀出，却被马忠、张嶷
　　、马岱内外夹攻，反被火烧得人马乱窜，死伤无数，只好领残兵冒烟突火而逃。张虎、乐琳
　　看到火光，带领人马杀奔蜀寨，寨中不见一人，急忙回兵，吴班、吴懿杀到，张、乐冲出包
　　围，回到本寨，寨子已被关、张袭取了。二人遇见孙礼，同领残兵来见曹真。曹真再不出战。
　　孔明派人授魏延密计，让拔寨退兵。张郃来见曹真，说：“我来听
　　都督调遣。”曹真说：“曾见仲达吗?”张郃说：“仲达吩咐：‘我
　　军胜，蜀军不会走；我军败，蜀军必走。’我军失利，都督探听蜀军消息了吗?”曹真忙派人到蜀寨打探，只剩下空营，蜀军已退两天了，张郃就领兵追击。魏
　　延领了密计，夜间二更拔寨退往汉中，王双得知，忙率军追赶。眼看要赶上蜀军，却见本寨
　　火光冲天，慌忙退兵。不料半路上突然冲出几十骑人马，大叫：“魏延在此!”王双措手不
　　及，被魏延一刀斩了。魏兵不知虚实，四散逃命。张郃未追上蜀兵，
　　回到寨中。曹真接到郝昭的报告，说是王双被杀，忧虑成病，回到洛阳。
　　孙权得知孔明二出祁山，曹真损兵折将，就要兴兵伐魏。张昭说：“武昌东山，凤凰来仪
　　，大江之中，黄龙屡现，主公可即皇帝位，然后兴兵。”众官齐声附和。孙权就选四月丙寅
　　日，在武昌南郊筑坛称帝，改黄武八年为黄龙元年。孙权回到建业，商议如何伐魏。张昭认
　　为他初登帝位，不可用兵，可派人入川，联络蜀汉。孙权就派使者入川，来见刘禅。刘禅与
　　大臣商议，许多大臣认为孙权妄称皇帝，是反叛行为，应与吴绝交。刘禅派使者到汉中问孔
　　明，孔明让送礼祝贺，请孙权出兵，他好乘机进兵中原。刘禅就派陈震为使，带上厚礼到建
　　业祝贺，让东吴出兵。孙权问陆逊怎么应付，陆逊要虚张声势，让蜀国出兵，吴国再乘机取
　　利。
　　陈震到汉中，把吴国准备出兵的事告诉孔明。孔明探听到郝昭病重，就命魏延、姜维如此
　　取陈仓，关兴、张苞如此接应。郭淮听说郝昭病重，让张郃速去替他
　　。就在这时，蜀军攻入城中，郝昭吃惊而死。魏延、姜维来到城下，却见孔明已在城头。孔
　　明让魏、姜立即取散关。二人到散关，魏兵已逃散，刚进了关，张郃已领兵来到。二人分兵防守，张郃只得退兵，被魏延追杀一阵，大败
　　而逃。孔明领兵出斜谷，再出祁山，安下营寨，让姜维、王平各引一万人马分别取武都、阴平。
　　张郃逃回长安，向郭淮、孙礼说明战况。郭淮大惊，就留张郃守长安，命孙礼守雍城，他领兵守郿城，又派人到
　　洛阳告急。魏主得知孔明入侵，又得知陆逊在武昌跃跃欲试，不知如何对付。司马懿认为，
　　东吴不会出兵，蜀不会忘记荆州、街亭之仇，与吴联盟只是暂时的，陆逊当然知道这一点，
　　就会坐山观虎斗。魏主封司马懿为大都督，引兵征西。司马懿来到长安，得知武都、阴平没
　　有消息，忙派郭淮、孙礼前去救应。二人领兵从陇西小路进军，正走着，探子来报，阴平
　　已被王平攻破，武都已被姜维攻破。二人急忙退兵，孔明乘四轮车拦住去路，说：“郭淮、
　　孙礼不要走，司马懿的计怎能瞒过我?你二人还不投降，还想跟我决战吗?”郭淮、孙礼惊惶
　　失措。关、张、王、姜四将从前后夹攻，魏兵大败，二人只好扔了马匹，翻山逃走。张苞催
　　马赶来，不小心跌入山涧，摔成重伤。孔明忙让人救起，送他回成都养伤。
　　郭、孙见到司马懿，说了兵败的经过。司马懿说：“孔明比我棋高一着，不是你们的罪过
　　。”吩咐张郃、戴凌各领一万兵抄蜀兵后路，他从前面接应。张、戴
　　走不到三十里，被数百辆车拦住去路，刚想退兵，四下火起，伏兵杀出。孔明在山上大叫，
　　让二人早早投降，张郃冲杀出去，回头不见戴凌，又杀进去，救出戴
　　凌。孔明见张郃英雄，就要设法除去他。司马懿见张、戴再败，自叹
　　不如孔明。孔明得胜回寨，让魏延挑战，魏军一连半月不出战。孔明正想法破敌，费祎持圣
　　旨到，刘禅念孔明功高，恢复孔明的丞相职务。
　　孔明见司马懿不出战，传令各寨都退兵。张郃等认为蜀兵粮尽而退
　　，应该追击。司马懿认为蜀国去年大丰收，不愁军粮，撤兵必是诱敌之计。只派人跟踪，不
　　派兵追赶。军士回报，说蜀兵只退三十里就下寨。司马懿更认为孔明撤军是诱敌。过了半个
　　月
　　，蜀兵又退三十里下寨。司马懿混在军中看了，回营说：“这是孔明的诱敌之计，不可追赶
　　。”又过了十多天，孔明又退三十里下寨。张郃等一再请战，如果不
　　胜，甘当军令。司马懿被缠不过，只好让张、戴领兵三万，副将数十名，谨慎进军，他自领
　　精兵随后接应。张、戴领兵出发，只顾穷追猛赶，势如急风暴雨。当时正是六月，天气十分
　　炎
　　热，赶了二十多里，人马都汗如雨下。待赶到五十里外，魏兵都气喘吁吁。孔明在山头把红
　　旗一展，前有马忠、张嶷、吴懿、吴班，后有王平、张翼，率伏兵一齐杀出。张、戴率魏兵
　　拼死抵抗，却无法冲出重围。这时，司马懿从后面杀来，王平与张翼兵分两路，分头抵
　　挡魏军。姜维、廖化在山头见王平等陷入危急，急忙拆开孔明的锦囊看了，立即领兵杀向魏
　　营。司马懿一路上留下不少探子，很快就得知蜀军出奇兵去端他的老窝，只好回兵救援。张
　　、戴杀不出去，翻山逃走。数万魏兵和几十员将领都成了刀下鬼。司马懿回寨，见蜀兵退去
　　，收拾了败兵，把众将大骂一顿，声称今后谁再轻敌妄动，定按军法斩首。众将羞愧难言。
　　孔明正想乘胜进军，彻底消灭魏军，却得到张苞伤重身死的噩耗，不由放声大哭，口吐鲜
　　血，昏倒在地。众人把他救起，治疗了半个多月，他仍感到昏昏沉沉，不能理事，只好退兵
　　汉中，自回成都养病。蜀军退了五天，司马懿才知道，不由长叹说：“孔明神出鬼没，我不
　　如他呀!”他就留众将把守关隘，自己回到洛阳。
　　建兴八年七月，曹真病愈，要与司马懿共同领兵。魏主就拜曹真为大司马、征西大都督，
　　司马懿为大将军、副都督，刘晔为军师，领四十万大军经剑阁取汉中，郭淮、孙礼也各自领
　　兵出发。
　　孔明已病好多时，每天操练人马，排练八卦阵。他得知司马懿进犯的消息，命
　　张嶷、王平领一千兵去守陈仓口。二人面面相觑，一千人怎能抵挡四十万大军?孔明说：“
　　我让你们去，你们就放心前去，我自有主张。”二人得知孔明的意图，才领兵前去。孔明领
　　大军出汉中，传令各处关隘预备一个月的柴草粮食，以防秋雨，大军等候出征。
　　曹真、司马懿领兵来到陈仓城，不见一间房屋。曹真要进兵，司马懿说：“我夜观天文，
　　很快要下大雨。深入了重地，退回就难了。我们应搭起窝棚，以防阴雨。”魏兵就驻扎下来
　　。不出半月，天降大雨，连绵不止，平地积水三尺。大雨连下一个月，马无草料，饿死无数
　　。魏主得知，设坛求晴，仍是不见天日，只好传旨，让曹真、司马懿退兵。曹真与司马懿设
　　下两支伏兵，缓缓撤军。
　　孔明得知魏军撤退，料知必有埋伏，不让众将出击，命令魏延、张嶷、杜琼、陈式出箕谷，马岱、王平、张翼、马忠出斜谷，到祁山会师。曹真与司马懿走了十多天，不见蜀军追来。
　　曹真放下心，司马懿却猜中孔明必再次兵出祁山。二人打赌，各据一谷，假如十日内蜀兵不到，司马懿扮做女人向曹真请罪，蜀兵到了，曹真将天子赐的一条玉带、一匹宝马输给司马
　　懿。司马懿屯兵祁山东的箕谷，布下伏兵，严阵以待。魏延等四将正领兵前行，邓芝从后面
　　赶来，传达孔明的命令，提防埋伏，不可轻进。陈式嘲笑孔明用兵多疑，真有本领，就不会
　　有街亭之败。魏延也说孔明若用他的计，兵出子午谷，早占领长安多时了。邓芝再劝，二人
　　也不听，陈式就带五千人马，要先出箕谷羞孔明。邓芝只好飞马回报孔明。陈式走不了几里
　　，忽听一声炮响，魏军伏兵杀出，把他围得铁桶一般。幸亏魏延及时杀来，救出陈式，五千
　　人马只剩四五百伤兵了。魏兵追杀过来，杜琼、张嶷引兵接应，才杀退魏兵。陈式、魏延后
　　悔不及。
　　邓芝见到孔明，说魏、陈多么无礼。正说着，探子来报，说是陈式兵败。孔明让邓芝去箕
　　谷抚慰，防止陈式生变。他又安排马忠、张翼、王平、马岱，如何分头行动，安排关兴、廖
　　化如此这般。他自领精兵快速前进，路上又安排吴班、吴懿如此行动。曹真根本不信蜀兵会
　　来，没作任何准备。到了第七天，探子报称谷中有小股蜀兵活动，就派秦良领五千兵去巡逻
　　，把蜀兵赶走。秦良刚到谷口，蜀兵就慌忙退去。他领兵赶了五六十里，不见蜀兵，正在歇
　　息，吴班、吴懿、关兴、廖化领兵从前后杀来。魏兵走投无路，多半投降，秦良被廖化一刀
　　斩了。孔明让魏军脱了衣甲，让蜀兵穿上，由四将率领，直奔曹真寨。司马懿派人告诫曹真
　　，说是已消灭四千余蜀军，他却说没见一个蜀军。不多时，军士来报，说是秦良回来了。曹
　　真出帐迎接，寨中四处火起。关兴、廖化、二吴从前面杀来，马岱、王平从后面杀来，马忠
　　、张翼也领兵杀到。魏军措手不及，四处逃生。众将保护曹真望东逃出，正危急时，司马懿
　　领兵来救，杀退蜀兵。曹真羞愧得无地自容。司马懿劝他不必把打赌放在心上，如今到渭滨
　　安营，以防蜀兵。曹真气成大病，卧床不起。
　　孔明犒赏三军，追究打败仗的责任。命武士斩了陈式。孔明正要进兵，得知曹真生病，已
　　料到他病重不起，留在军中，是怕军心混乱，就写下一封书信，对秦良的降兵说：“你们父
　　母妻子都在中原，我放你们回去。你们把这封书信交给曹子丹，必有重赏。”降兵回寨，把
　　书信交给曹真。曹真见上面写着他如何屡次兵败，丢盔弃甲，死尸遍地，还有什么脸回洛阳
　　?史官要把他的败迹记录下来，百姓也将传说他的无能。曹真看罢，气愤填膺，当夜就死了
　　。司马懿就把尸体用兵车运回洛阳。
　　魏主得知曹真已死，传旨命司马懿立即叫战。司马懿先下战书，孔明见了，对众将说：“
　　曹真已经死了!”就批下“来日交锋”四字。他分别向姜维、关兴授了密计。次日，双方大
　　军在渭滨摆开战场，双方主帅依例各自夸耀己方的天子是正统的，指责对方为叛贼。司马懿
　　舌战先败一阵，羞怒地说：“我跟你决战!你要胜我，我誓不为将!你要败了，趁早回家种地
　　，我不杀你。”孔明问：“你想斗将、斗兵，还是斗阵法?”“斗阵法。”“你先布阵。”
　　司马懿把黄旗一展，将士很快布成阵势。孔明不屑地笑道：“我的末将也能布这种阵，这是
　　混元一气阵。”司马懿说：“你布阵我看。”孔明把羽扇一招，将士布成阵势。司马懿说：
　　“这是八卦阵。”孔明问：“你敢打吗?”司马懿说：“既认你阵，当然敢打。”他吩咐戴
　　凌、张虎、乐琳三将：“这阵分休、生、伤、杜、景、死、惊、开八个门。你们可从正东生
　　门杀入，从西南休门杀出，再从正北开门杀入，从西南休门杀出，再从正北开门杀入，就可
　　打破此阵。”三人各带三十骑，从生门杀入，只见阵如连城，到处都是门户，哪里分清东西
　　南北?三将不能相顾，晕头转向，跌跌撞撞，不一会儿都被生擒，绑见孔明。孔明让他们给
　　司马懿捎话，让他重学兵书，再来交战。然后把他们剥了衣甲，用墨涂脸，放出阵去。司马
　　懿受此奇耻大辱，怎能忍受?亲自挥剑领百余员骁将冲杀过去。双方刚一接触，突然后军大
　　乱，关兴、姜维分别领兵杀来，蜀军三路夹击魏军。司马懿望南拼命杀出，魏军伤亡十分之
　　六七。司马懿到渭水南岸下寨，坚守不出。
　　永安城李严派都尉苟安运粮，苟安路上贪杯，违限十天，按军法违限三日当斩。孔明要斩
　　苟安，杨仪劝道：“苟安是李严的人，李严又是西川的老臣，杀了他，川中无人敢送粮了。
　　”孔明就打他八十军棍。他怀恨在心，夜间引几名亲信投了魏军。司马懿让他回成都散布谣
　　言，就说孔明要夺刘禅的帝位，成功后保奏他当高官。苟安回到成都，到处散布谣言。宦官
　　得知，告诉刘禅，让刘禅召孔明回成都，削去兵权。后主降旨，蒋琬问：“丞相连建大功，
　　为什么要召回?”刘禅支吾：“朕有机密事，要跟丞相面议。”孔明接到圣旨，仰天长叹说
　　：“必有佞臣在主上面前说我坏话。我不回去是欺君，我要回去，以后再难得到这样的好机
　　会了。”姜维担心撤军时魏军会追杀，孔明分五路撤军，用增灶法迷惑司马懿，魏军就不敢
　　追赶。
　　司马懿得知蜀军撤退，不敢贸然追击，领百余骑到蜀营踏看，教军士数灶。次日，再让军
　　士数灶，报告说：“灶多一分。”司马懿怕中埋伏，不敢追击。日后，当地人报告司马懿，
　　说是孔明没有添兵，只是添灶。司马懿叹道：“孔明用虞诩的增灶法瞒过我，我不如他的谋
　　略高明。”就退兵回洛阳。
　　孔明没损失一兵一卒，退回汉中，犒赏了三军，赶回成都，见到刘禅，说“老臣连打胜仗
　　，正要乘胜取长安，不知陛下为什么突然召回?”刘禅无话可说，支吾：“朕久不见丞相，
　　心中十分想念，所以召回，没别的事。”孔明说：“陛下言不由衷，必有佞臣说臣有异心。
　　”刘禅
　　默默无言。孔明说：“老臣受先帝厚恩，发誓以死报答，如今出了内奸，让臣怎么讨贼呢?
　　”刘禅这才说了实话。孔明审问宦官，查出是苟安造的谣言，急忙命人搜捕，苟安已逃到魏
　　国。他就把妄奏的宦官杀了，其余的赶出宫，又责备蒋琬、费祎等不能察觉内奸，规劝主上
　　，二人承认有罪过。孔明回到汉中，一面命令李严运粮，一面准备出兵。杨仪说：“几次用
　　兵，兵力疲惫，粮草不济，不如兵分两班，每班三个月，轮流出征，就可休养兵力，必取中
　　原。”孔明认为这个办法很好，就让兵分两班，一百天一替换，违限者按军法处治。
　　建兴九年二月，魏太和五年，魏主知孔明又伐中原。司马懿愿单独领兵，抗击蜀军，魏主
　　亲自送他出征。他到了长安，会齐诸路人马。张郃愿领兵守雍、郿，司马懿不愿兵分多路，除留兵守上邽外，集中兵力往祁山，让张郃为先锋，让郭淮守陇西，他自领大军，督诸将分
　　路进兵。前哨探子回报：“孔明大军望祁山来，先锋王平、张嶷出散关望斜谷来。”司马懿
　　料到孔明要抢割陇西小麦，充当军粮，留张郃领四万兵守祁山，他领兵奔陇西。
　　孔明兵至祁山，见魏军已有防备，而屡催李严不见运粮到来，就留王平、张嶷、二吴守大
　　营，他领姜维、魏延到卤城。卤城太守自知难敌孔明，开城投降。孔明留张翼、马忠守卤城
　　，自领兵去陇上割麦。前军报称：“司马懿引兵在此。”孔明就让人推出一模一样的三辆四
　　轮车，车上装饰也一样。他命姜维引一千兵护车，五百兵擂鼓，埋伏在上邽后面。每辆车用二十四人，都穿黑衣，披发赤足，仗剑簇拥四轮车。命三万兵带上镰
　　刀绳子，准备割麦。让关兴装作天蓬神，手执七星幡，步行车前，他端坐车上，望魏营而去
　　。司马懿得报，出营察看，命两千人马，把孔明连人带车捉来。孔明见魏军冲来，回车缓缓
　　望蜀营而去。魏兵只觉阴风阵阵，催马猛追，就是追不上。魏兵大惊，勒马停下。孔明见魏
　　兵不追，又转过车来。魏兵犹豫一阵，又放马赶来，孔明回车缓缓而行。魏兵前后赶了五六
　　十里，只见孔明就在前面不远处慢行，却怎么也追不上。司马懿领兵赶来，说：“孔明会八门
　　遁甲，这是六甲天书内的缩地法，不可再追。”司马懿刚想退兵，只听鼓声震天，三方推出
　　三辆四轮车，车上各坐一个孔明。他认为是孔明请来的神兵，急忙领兵奔进上邽，闭门不出。三万蜀兵早把陇上小麦割完，运到卤城打麦去了。
　　三天后，司马懿才知中计，那三个孔明分别是姜维、马岱、魏延装扮的。他侦知卤城蜀兵
　　不多，就与郭淮各领一军，想前后夹攻。孔明已料到司马懿必攻卤城，让姜维、马岱、魏延
　　、马忠分四处，各引两千兵埋伏。孔明自引百余人，带上火炮，埋伏在城外麦田里。天黑时
　　，司马懿兵临城下，与郭淮合兵，连夜攻城。城上万弩齐发，箭如雨下，魏兵不敢前进。这
　　时，魏军中号炮连天，将士大惊。接着就见四面火光冲天，杀声动地，四路蜀兵一齐杀来。
　　卤城四门大开，城内蜀兵蜂拥杀出。司马懿拼命突围占了山头，郭淮领败兵屯在山后。郭淮见与蜀军对峙许久，又伤亡三千多人，建议司马懿调雍、凉人马围困孔明，他率军奇袭剑阁，断其粮道，可消灭蜀军。司马懿就调雍、凉人马助战，派孙礼跟郭淮去袭剑阁。
　　孔明多日不见魏兵出战，猜知魏军要袭剑阁，派姜维、马岱各领一万兵守住险要，以退魏
　　兵。杨仪说：“如今已到一百天，士兵该换防了，汉中兵已出川口，只待合兵相换。”孔明
　　便命令蜀兵收拾行装，准备回家。恰在这时，雍、凉的二十万大军来到，蜀兵无不害怕。杨
　　仪建议该换的兵暂不换，待新兵来到再换。孔明说：“我既有令在先，就不能失信，该走的
　　马上走。”蜀兵得知，群情踊跃，都愿舍命一战，报答丞相。孔明再三相劝，蜀兵都不肯回
　　。他这才下令：“你们可出城安营，待魏兵一到，不等他喘一口气，立即发起猛攻。”蜀兵
　　领命出城，以逸待劳。西凉人马连夜赶来，走得人困马乏，刚想歇口气，蜀兵奋勇杀到，个
　　个勇猛无比，杀得雍、凉兵尸横遍野，血流成河。孔明收兵，大加犒赏，却收到李严的告急
　　文书，说是吴已与魏联合，吴军要进攻西川。孔明大惊，只好让各路人马互相掩护，慢慢退
　　兵。张郃见蜀兵退去，不敢追击，忙去报告司马懿。司马懿怕中埋伏
　　，不让追。
　　司马懿直到得知卤城是一座空城，才准许魏军追击。张郃自告奋勇
　　打先锋，司马懿认为他性子急躁，不让他去。他坚持要去，司马懿就给他五千人马，让魏平
　　领二万兵随后，自领三千兵接应。张郃猛追了三十里，遇见魏延。二
　　人战不十回合，魏延败走。他又赶三十里，关兴拦路，战不十回合，关兴又败走。就这样，
　　张郃赶不多远，魏延、关兴轮流迎敌，抛弃的物品堆满道路。张郃越战越怒，直赶进木门道。此时天色已黑，一声炮响，山上火光冲天，巨石乱柴滚下来塞住道路。再想退兵，后路也被堵死。一声梆子响，山上万弩齐发，把张郃与部下都射死了。魏军大队赶到，慌忙后退。诸葛亮在山上说：“我今天打猎，本想射一匹‘马’，却误射了一头‘獐’。你们转告仲达，他早晚必被我擒获!”司马懿得知张郃阵亡，叹道：“这是我的过错。”
　　孔明返到汉中，正想回成都，费祎来到，说是天子问孔明为什么突然撤军。孔明说：“李
　　严告急，说是东吴准备入川，所以我才回师。”费祎说：“李严向天子奏称军粮已办，丞相
　　无故回师，天子才让我来问丞相的。”孔明派人访察，原来是李严没准备好军粮，怕丞相降
　　罪，故意骗回孔明，再妄奏天子，掩饰过失。孔明大怒，命人召来李严，要按军法斩首。费祎劝下来，回奏刘禅，刘禅也要斩李严，蒋琬劝：“李严是先帝托孤大臣，请饶他死罪。”
　　刘禅就把李严贬为平民，迁到梓潼闲住。